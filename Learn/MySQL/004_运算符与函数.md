# MySQL中函数使用


### 字符函数

* CONCAT()

字符连接

```sql
SELECT CONCAT(firstname, lastname) FROM USER;
```

* CONCAT_WS()

指定分隔符进行字符连接

```sql
SELECT ('.', firstname, lastname) FROM USER;
```

* FORMAT()

数字格式化，返回结果是字符型

```sql
SELECT FORMAT(score, 2) FROM USER; 
```

* LOWER()

转换为小写

```sql
SELECT LOWER(firstname) FROM USER;
```

* UPPER()

转换为大写

```sql
SELECT UPPER(firstname) FROM USER;
```

* LEFT()

获取左侧字符

```sql
SELECT LEFT(firstname, 2) FROM USER;
```

* RIGHT()

```sql
SELECT RIGHT(firstname, 3) FROM USER;
```

* LENGTH()

获取长度

* LTRIM()

去除左侧空格

* RTRIM()

去除右侧空格

* TRIM()

```sql
# 去除前面问号
SELECT TRIM(LEADING '?' FROM firstname) FROM USER;

# 去除后面问号
SELECT TRIM(TRAILING '?' FROM firstname) FROM USER;

# 前后所有问号（不包括中间）
SELECT TRIM(BOTH '?' FROM firstname) FROM USER;
```

* REPLACE()

替换字符串

```sql
# 用!替换?
SELECT REPLACE(firstname, '?', '!') FROM USER;
```

* SUBSTRING()

获取字串

```sql
# 从第3位开始取，取一位，如果只有一个数字，取到字符串结尾，定位符可以是负数
SELECT SUBSTRING(firstname, 3, 1) FROM USER;
```


### 数值函数

* CEIL()

进一取整

* DIV()

整数除法

* FLOOR()

舍一取整

* MOD()

取余

* POWER()

幂运算

* ROUND()

四舍五入

* TRUNCATE()

截断


### 聚合函数

* 取平均值

```sql
SELECT AVG(`列名`) FROM 表名;
```

* 条数

```sql
# 表中的所有数据条数，不管列中是否是NULL
SELECT COUNT(*) FROM 表名;

# 具体列，列不是NULL才会被统计
SELECT COUNT(`列名`) FROM 表名;
```

* 最大值

```sql
SELECT MAX(`列名`) FROM 表名;
```

* 最小值

```sql
SELECT MIN(`列名`) FROM 表名;
```

* 求和

```sql
SELECT SUM(`列名`) FROM 表名;
```


### 日期函数

* NOW()

* CURDATE()

* CURTIME()

* DATE_ADD()

* DATEDIFF()

* DATE_FORMAT()
