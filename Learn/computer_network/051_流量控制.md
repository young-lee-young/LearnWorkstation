# TCP流量控制

控制发送方的发送速率不要太快，要让接收方来得及接收

### 数据链路层流量控制

* 停止等待

数据帧发送时延
数据帧传播时延
接收方处理时延
确认帧发送时延
确认帧传播时延
确认帧处理时延

* 滑动窗口

发送方维护一个发送窗口、接收方维护一个接收窗口


### 传输层流量控制

* 流量控制

接收方返回的ACK报文包含接收窗口大小，利用大小控制发送方的数据发送

* 流量控制死锁产生

发送方收到0窗口应答，停止发送。接收者过一段时间又可以接受数据，向发送发发送非0窗口通告，若非0窗口通告丢失，发送者一直等待非0窗口通告，接收者一直等待发送方数据，产生死锁。

* 死锁解决

每次发送方收到一个非0窗口应答，启动持续计时器，时间一到发送报文（0窗口探测报文，携带一字节数据）询问接收者窗口大小。若接收者仍然返回0窗口应答，重制计数器继续等待；若接收者收到非0窗口应答，表示应答报文丢失，此时重制发送窗口后开始发送

