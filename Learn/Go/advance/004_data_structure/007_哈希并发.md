
### 并发问题

A 协程在桶中读取数据时，B 协程驱逐了这个桶，A 协程会读取到错误的数据或者找不到数据


### 解决

* 给 map 加锁（mutex）

* sync.Map（sync/map.go/Map）

```go
package sync

type Map struct {
	mu     Mutex
	read   atomic.Value
	dirty  map[interface{}]*entry
	misses int
}
```
