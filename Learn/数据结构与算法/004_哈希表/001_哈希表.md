# 哈希表


### 哈希表基础

* 什么是哈希表（散列表、Hash Table）

把key通过一个固定的算法函数（哈希函数）转换为一个固定的整型数字，将该数字对数组长度（数组长度最好是质数）进行取余，取余结果当作数组的下标，把value存储到对应位置的空间中，这个存储数据的空间叫做哈希表

* 哈希表时间复杂度

O(1)

* 哈希表加载因子

哈希表实际所存数据量和哈希表最大容量之间的比值，叫哈希表的加载因子，一个较为平衡的加载因子大约是0.7 - 0.8


### 哈希函数（散列函数）

* 哈希函数原则

1. 一致性：如果 a == b, 则bash(a) == hash(b)
2. 高效性：计算高效简便
3. 均匀性：哈希值均匀分布

* 不同类型键一般处理

整数：与素数取模
浮点数：转换为整数后与素数取模
字符串：

hash(code) = (c * B^3 + o * B^2 + d * B^1 + e * B^0) % M
hash(code) = ((((c * B) + o) * B + d) * B + e) % M
hash(code) = ((((c % M) * B + o) % M * B + d) % M * B + e) % M

```
hash_value = 0
for item in s:
    hash_value = (hash_value * B + item) % M
```


### 哈希碰撞

* 什么是哈希碰撞

不同的key，进行哈希函数计算后得到相同的值，即发生哈希碰撞

* 哈希碰撞解决方法

1. 开链表法（seperate chaining，将所有有碰撞的数据存储到一个链表里）

Java8之前，每一个位置对应一个链表
Java8开始，当哈希冲突达到一定程度，每一个位置从链表转成红黑树

2. 重哈希（选择不同的哈希函数进行再哈希，直到没有碰撞）
3. 线性探测（依次查询后面的值，找到一个空值）
4. 二次探测（对地址进行加平方或者减平方后，找到空位置）


### 问题

* 二次探测

```python
# 0x7fffffff转换成二进制0 + 31个1
print(-1828048108302 & 0x7fffffff)
```
