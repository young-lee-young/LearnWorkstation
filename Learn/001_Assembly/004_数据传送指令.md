# 数据传送指令



### 通用传送指令

所有通用传送指令都不影响标志位



* 基本传送指令：mov

目的：将源操作数内容赋值给目的操作数

注意⚠️：

1. 内存地址之间不能直接传送，通过通用寄存器中转
2. 立即数不能直接送到段寄存器，通过通用寄存器中转
3. 段寄存器之间不能直接传送，通过通用寄存器中转
4. CS 只可以作为源操作数，因为 CS 为当前指令的寄存器，修改后会无法继续执行指令
5. 源操作数和目的操作数的宽度必须相同

```assembly
; mov 通用寄存器, 立即数
mov ax, 0

; mov 段寄存器, 通用寄存器
; 寄存器的位宽必须一致
mov ss, ax

; mov 位宽 目的操作数, 源操作数
; 将立即数送入内存，必须制定位宽（byte、word、dword、qword）
mov byte [0x00], '2'
```



* 入栈指令：push

入栈步骤：

1. 修改栈顶，sp = sp - 2，栈操作以 word 为单位，所以 -2
2. 给 sp 和 sp + 1 位置赋值

```assembly
; 入栈
push 原操作数

; 入栈一个字，2个字节
push word 1
; 入栈一个字节，实际是2个字节
push byte 2
; 入栈一个双字，4个字节
push dword 3
```



* 出栈指令：pop

出栈步骤：

1. 将 sp 和 sp + 1 数据送入目的地址
2. 修改栈顶，sp = sp + 2，栈操作以 word 为单位，所以 +2

```assembly
pop 目的地址

pop ax ; 将栈顶值出栈道 ax
```



注意⚠️：

1. sp 总是指向栈顶
2. 堆栈操作以 word（2个字节） 为单位
3. push、pop指令的操作数可以是CPU内部寄存器或存储单元
4. push cs 合法，pop cs 非法



* 交换指令：xchg

源操作数和目的操作交换

在寄存器之间、寄存器和存储器之间

```assembly
xchg 目的操作数, 源操作数
```

注意⚠️：

1. 存储器之间不能直接交换
2. 段寄存器不能作为操作数
3. 允许字节或字操作