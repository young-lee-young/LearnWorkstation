### GPU 虚拟化方案

* 软件模拟 GPU：使用 CPU 模拟 GPU

缺点：耗 CPU 资源，效果差

* GPU 透传

多张物理 GPU 透传给虚拟机

* GPU 共享

多个虚拟机共享 GPU 资源

* vGPU


### vGPU 技术路线

* 硬件虚拟化（AMD）

SR-IOV：single root I/O virtualization


* 软件虚拟化（Nvidia）

K1、K2 -> M6、M60、M10 -> P4、P6、P40、P100 -> T4、V100 -> RTX 6000、RTX 8000 -> A100
用户密度 <-    -> 用户性能

Geforce：消费卡
Quadro：图形卡
Tesla：数据中心

支持 vGPU：Tesla 所有 + Quadro RTX 6000、Quadro RTX 8000

nvidia 限制单张卡不能大于 32 个 vGPU

软件虚拟化方案：切分策略、功能特性主要取决于其使用的软件版本（Manager + Driver）


### Nvidia 虚拟化

* GPU 包括那些主要资源

计算核心（CUDA core）、显存、BAR、channel

虚拟机独占资源：显存、虚拟 BAR、channel
虚拟机共享资源：计算核心


资源隔离：显存隔离，算力隔离，故障隔离


* 资源切分

一张 GPU 卡只能虚一种规格的 vGPU

K、M 系列切分 0.5G 显存，P 系列之后切分颗粒度最低 1G 显存

M60 - 2Q
M60：使用 M60 宿主显卡
2：虚拟显存大小
Q：授权模式，

Q -> 使用 vDWS 授权，
B -> 使用 vPC 授权，
A -> 使用 vAPP 授权，
C -> 使用 vCS 授权
