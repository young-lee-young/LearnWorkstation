# 容器操作


### 基本命令

* 列举容器

```bash
# 列举正在运行的容器
docker ps

# 列举所有的容器
docker ps -a

# 最后一次创建的容器
docker ps -l
```


### 运行容器

* 启动容器

```bash
# --name: 定义容器名字
docker run --name $container_name $image /bin/echo 'hello world'
# /bin/echo 'hello world': 在容器中执行的语句
```

* 运行交互式容器

```bash
docker run -it $image /bin/bash
# -i: 允许对容器内的标准输入进行交互
# -t: 在新容器内指定一个伪终端或终端
```

* 后台模式启动容器

```bash
docker run -d ubuntu:16.04 /bin/sh -c 'while true; do echo hello world; sleep 1; done'
# -d 后台模式启动
# 运行后不会输出结果, 而是输出一串长字符, 是容器的ID, 唯一
```

* 端口方面

```bash
# 随机映射端口
docker run -d -P $image
# 一般映射到 32768、32769

# -p 映射端口，宿主机端口:容器内端口
docker run -d -p 3001:3000 $image
docker run -d -p 127.0.0.1:3001:3000 $image
docker run -d -p 127.0.0.1:3001:3000/udp $image

# 查看映射端口
docker port 容器ID或容器名
```

* RoofFS 方面

```bash
# 通过 --storage-opt size=5G 限制 RootFS 大小
docker run -d --storage-opt size=5G nginx
```

* 映射

```bash
# 通过 -v 或者 --volume 映射目录
docker run -d -v $host_path:$container_path $image
```

* 共享命名空间

```bash
# 和宿主机共享命名空间
docker run -d --network=host --ipc=host --pid=host $image

# 和其他容器共享命名空间
docker run -d --network=container:$container_name --ipc=container:$container_name --pid=container:$container_name $image
```

* 特权模式启动

```bash
docker run -d --privileged $image
```


### 其他

* 容器日志

```bash
docker logs 容器ID或容器名
docker logs -f 容器ID或者容器名
docker logs --tail=100 容器ID或者容器名
```

* 详细信息

```bash
docker inspect 容器ID或者容器名 	# 返回一个json文件
```

* 启动容器

```bash
docker start 容器ID或容器名
```

* 重启容器

```bash
docker restart 容器ID或容器名
```

* 停止容器

```bash
docker stop 容器ID或容器名
```

* 删除容器

```bash
# 删除时容器必须是停止状体
docker rm 容器ID或容器名
```
