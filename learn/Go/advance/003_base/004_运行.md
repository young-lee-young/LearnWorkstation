### 程序入口

runtime/rt0_linux_amd64.s/_rt0_amd64_linux -> runtime/asm_amd64.s/_rt0_amd64 ->

runtime/asm_amd64.s/runtime·rt0_go -> runtime/proc.go/main -> main.go/main


### 过程

* 读取命令行参数（_rt0_amd64）

复制参数数量 argc 和参数值 argv 到栈上


* 初始化 g0 执行栈（runtime·rt0_go）

g0 是为了调度协程而产生的协程

g0 是每个 Go 程序的第一个协程


* 运行时检测（runtime.check）

1. 检查各种类型的长度
2. 检查指针操作
3. 检查结构体字段的偏移量
4. 检查 atomic 原子操作
5. 检查 CAS 操作
6. 检查栈大小是否是 2 的幂次


* 参数初始化（runtime.args）

对命令行中的参数参数进行处理，参数数量赋值给 argc int32，参数值赋值给 argv **byte


* 调度器初始化（runtime.schedinit）

1. 全局栈空间内存分配
2. 加载命令行参数到 os.Args
3. 堆内存空间的初始化
4. 加载操作系统环境变量
5. 初始化当前系统线程
6. 垃圾回收器的参数初始化
7. 算法初始化（map、hash）
8. 设置 process 数量


* 创建主协程（runtime·mainPC + runtime·newproc + runtime·mstart）

1. 创建一个新的协程，执行 runtime.main
2. 放入调度器等待调度
3. 初始化一个 M，用来调度主协程


* 主协程执行主函数

1. 执行 runtime 包中的 init 方法
2. 启动 GC 垃圾回收器
3. 执行用户包依赖的 init 方法
4. 执行用户主函数 main.main()
