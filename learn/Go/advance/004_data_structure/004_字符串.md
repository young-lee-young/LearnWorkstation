### Unicode

变长格式

1. 128 个 US-ASCII 字符只需 1 个字节编码
2. 西方常用字符需要 2 个字节
3. 其他字符需要 3 个字节
4. 极少数需要 4 个字节


### 字符串大小

* 长度

str 的大小为 16 字节，指针 str 8 字节 + 长度 len 8 字节

len 方法获取的是字符串底层的字节数

```go
package main

import (
	"fmt"
	"unsafe"
)

func main() {
    fmt.Println(unsafe.Sizeof("慕课网"))           // 16
    fmt.Println(unsafe.Sizeof("慕课网Moody老师"))   // 16
}
```


### 字符串结构体

* runtime 结构体

```go
// runtime/string.go/stringStruct
package runtime

type stringStruct struct {
	str unsafe.Pointer  // 指针指向底层 Byte 数组
	len int             // Byte数组的长度，不是字符个数
}
```


* 示例

           | ------- 李 ------- |
Data --->  | Byte | Byte | Byte | Byte | ... | Byte |
           | ---------------- Len ----------------- |


* 反射包结构体

```go
// reflect/value.go/StringHeader
package reflect

type StringHeader struct {
	Data uintptr
	Len  int
}
```


### 字符串访问

* 访问每个字符

```go
package main

import "fmt"

func main() {
	s := "李lee"
	for _, char := range s {
		fmt.Printf("%c\n", char)
	}
}

/** 输出：
李
l
e
e
 */
```


* rune & byte

byte：占 1 个字节，和 uint8 本质上没有区别，表示 ASCⅡ 表中的一个字符

rune：占 4 个字节，和 uint32 本质上没有区别，表示 Unicode 中的一个字符

```go
package main

import "fmt"

func main() {
	s := "李狗"

	fmt.Println("byte", []byte(s))
	fmt.Println("rune", []rune(s))
}
/** 输出：
byte [230 157 142 231 139 151]
rune [26446 29399]
 */
```


### 字符串切分

* 切分方法

1. 转为 rune 数组
2. 切片
3. 转为 string

```go
package main

import "fmt"

func main() {
	s := "李二狗是好人"
	r := string([]rune(s)[:3])
	fmt.Println(r)
}
```
