# APIServer


### API Object

* API Object

Kubernetes 内部管理的基本元素，是 Kubernetes 在 ETCD 中信息存储单元

例如 Deployment、Pod、Service 都是 API Object


* API Group

一组 API Object 组成的一个具有共有性质的对象集合

例如，apps 这个 group，由 Deployment、ReplicaSet、StatefulSet 等 API Object 组成


* Legacy API Object

Kubernetes 项目初始阶段所引入的 API Object，没有显示定义在 API Group 下面

例如 Pod、Event、Node 等


### 代码位置

/kubernetes/cmd/kube-apiserver


### 源码解读

* 配置

options（面向用户，用户在命令行指定）-> config（面向 server，用来启动 server 时的配置）-> 启动 kube-apiserver


* Server Chain：构建过程从右向左，请求流程从左向右

Aggregation Server -> Master -> Extension Server -> Not Found Handler

1. Aggregation Server：负责转发请求到 Master 或 Extension Server

2. Master：kube-apiserver，负责内置的 API Object 相关的处理

3. Extension Server：Customer Resource 处理，包括 CR 和 CRD

4. Not Found Handler：找不到对应的 API Object
