# 视图（View）


### 基础

* 作用

视图可以创建不存在的虚拟表


* 原理

原理是预设一个 SELECT 语句，SELECT 语句的查询结果作为虚拟表的数据


### 视图算法的选择

* MERGE：将视图的 SQL 合并到主查询 SQL


* TEMPTABLE：将视图作为临时表（中间结果）来处理


* UNDEFINED：使用 MERGE 还是 TEMPTABLE 由 MySQL 决定


注意⚠️：一般来讲，MERGE 的性能优于 TEMPTABLE


### 视图使用

* 创建视图

```mysql
# 使用 MERGE 算法
CREATE ALGORITHM = MERGE VIEW `$view_name` AS 'SELECT 语句';

CREATE ALGORITHM = MERGE VIEW `girl` AS SELECT * FROM person WHERE gender = '女';
```


* 查询

```mysql
SELECT * FROM girl WHERE age > 18 AND age < 35;

# 上面的语句相当于
SELECT * FROM person WHERE gender = '女' AND age > 18 AND age < 35;
```


### 无法使用 MERGE 的 SQL

1. 聚集函数
2. DISTINCT
3. GROUP BY
4. HAVING
5. UNION、UNION ALL
6. 自查询
