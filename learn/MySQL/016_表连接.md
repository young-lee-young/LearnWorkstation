# 表的连接


### ON 和 WHERE

* ON

ON 后面的是连接（JOIN）条件，代表两个表建立关系所遵循的规则


* WHERE

WHERE 后面可以看作是筛选条件，是对最终结果集进行过滤所遵循的规则（先 JOIN，再过滤）


### 数据准备

* 创建表

```mysql
CREATE TABLE `boy` (
  hid   VARCHAR(64) NOT NULL COMMENT '编号',
  bname VARCHAR(64) NOT NULL COMMENT '姓名',
  PRIMARY KEY (`hid`)
) ENGINE=InnoDB CHARSET=utf8 COMMENT '男';

CREATE TABLE `girl` (
  hid   VARCHAR(64) NOT NULL COMMENT '编号',
  gname VARCHAR(64) NOT NULL COMMENT '姓名',
  PRIMARY KEY (`hid`)
) ENGINE=InnoDB CHARSET=utf8 COMMENT '女';
```


* 插入数据

```mysql
INSERT INTO boy VALUES ('A', '屌丝');
INSERT INTO boy VALUES ('B', '杨过');
INSERT INTO boy VALUES ('C', '陈冠希');

INSERT INTO girl VALUES ('B', '小龙女');
INSERT INTO girl VALUES ('C', '张柏芝');
INSERT INTO girl VALUES ('D', '死宅女');
```


### 内连接（JOIN, INNER JOIN）

* [内连接：无 ON 和 WHERE](016_内连接_01.png)

结果是两个表的笛卡尔积

```mysql
SELECT * FROM boy INNER JOIN girl;
```


* [内连接：有 ON](016_内连接_02.png)

```mysql
SELECT * FROM boy INNER JOIN girl ON boy.hid = girl.hid;
```


* [内连接：有 WHERE](016_内连接_02.png)

结果和 ON 相同

```mysql
SELECT * FROM boy INNER JOIN girl WHERE boy.hid = girl.hid;
```


### 左外连接(LEFT JOIN)，左边全选

* [左外连接](016_左外连接_01.png)

以左边表为基础，根据 ON 条件去右边查询相等的值，然后连接，如果右表没有符合的数据，则显示 NULL

```mysql
SELECT * FROM boy LEFT JOIN girl ON boy.hid = girl.hid;
```


* [左外连接：有连接条件](016_左外连接_02.png)

```mysql
SELECT * FROM boy LEFT JOIN girl ON boy.hid = girl.hid AND girl.gname = '小龙女';
```


* [左外连接：有 WHERE 过滤](016_左外连接_03.png)

```mysql
SELECT * FROM boy LEFT JOIN girl ON boy.hid = girl.hid WHERE girl.gname = '小龙女';
```


### 右外连接(RIGHT JOIN)，右边全选

* [右外连接](016_右外连接_01.png)

```mysql
SELECT * FROM boy RIGHT JOIN girl ON boy.hid = girl.hid;
```


* [右外连接：有连接条件](016_右外连接_02.png)

```mysql
SELECT * FROM boy RIGHT JOIN girl ON boy.hid = girl.hid AND girl.gname = '小龙女';
```


* [右外连接：有 WHERE 条件](016_右外连接_03.png)

```mysql
SELECT * FROM boy RIGHT JOIN girl ON boy.hid = girl.hid WHERE girl.gname = '小龙女';
```
