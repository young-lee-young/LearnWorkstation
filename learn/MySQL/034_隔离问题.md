# 并发存在的问题


### 脏读

A修改数据还未提交，B可以读取

* 解决

读已提交


### 不可重复读

A第一次读取数据，B修改数据并提交，A第二次读取数据，两次结果不一致

* 解决

可重复读


### 幻读

* 幻读情况

1. A第一次读数据，B插入数据并提交，A第二次读数据（这种幻读MySQL已经解决）
2. A第一次读数据，B插入数据并提交，A插入相同数据，报错提示主键重复
3. A第一次读数据，B插入数据并提交，A更新数据，B刚刚插入的数据也被更新

* 解决

在可重复读级别下，通过 Next-Key 锁（行锁 + 间隙锁）解决

* 间隙锁

间隙锁不分读写，不允许在间隙插入；可重复读加锁时，将同时锁住数据及其左右间隙
