# 并发存在的问题


### 脏读

A 修改数据还未提交，B 可以读取

* 解决

读已提交


### 不可重复读：在同一个事务内，两个相同的查询返回了不同的结果

A 第一次读取数据，B 修改数据并提交，A 第二次读取数据，两次结果不一致

* 解决

可重复读


### 幻读

* 幻读情况

1. A 第一次读数据，B 插入数据并提交，A 第二次读数据（这种幻读 MySQL 通过**可重复读** + **间隙锁**已经解决）
2. A 第一次读数据，B 插入数据并提交，A 插入相同数据，报错提示主键重复
3. A 第一次读数据，B 插入数据并提交，A 更新数据，B 刚刚插入的数据也被更新


* 为什么可重复读不能解决幻读

因为幻读是通过读取历史版本解决问题，但是新插入的数据没有历史版本


* 解决

在可重复读级别下，通过 Next-Key 锁（行锁 + 间隙锁）解决
