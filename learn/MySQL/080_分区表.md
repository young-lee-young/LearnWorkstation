### 分区表

将 InnoDB 的一个表分为多个表（有多个 ibd 文件），Server 层依然看作一个表

```mysql
CREATE TABLE `t` (
    `f_time` datetime NOT NULL,
    `c` int(11) DEFAULT NULL,
    KEY(`f_time`)
) ENGINE=InnoDB CHARSET=utf8 PARTITION BY RANGE (YEAR(f_time))(
    PARTITION p_2030 VALUES LESS THAN (2030) ENGINE = InnoDB,
    PARTITION p_2031 VALUES LESS THAN (2031) ENGINE = InnoDB,
    PARTITION p_2032 VALUES LESS THAN (2032) ENGINE = InnoDB,
    PARTITION p_others VALUES LESS THAN MAXVALUE ENGINE = InnoDB
);
```

* 指定分区位置

```mysql
CREATE TABLE `t` (
    `f_time` datetime NOT NULL,
    `c` int(11) DEFAULT NULL,
    KEY(`f_time`)
) ENGINE = InnoDB CHARSET = utf8 PARTITION BY RANGE (YEAR(f_time))(
    PARTITION p_2030 VALUES LESS THAN (2030) ENGINE = InnoDB,
    INDEX DIRECTORY = '/data1' DATA DIRECTORY = '/data2',
    PARTITION p_2031 VALUES LESS THAN (2031) ENGINE = InnoDB,
    PARTITION p_2032 VALUES LESS THAN (2032) ENGINE = InnoDB,
    PARTITION p_others VALUES LESS THAN MAXVALUE ENGINE = InnoDB
);
```

* 分区方式

1. 范围
2. 哈希
3. 列表

* 分区表优点

1. 降低 B+ 树层级，搜索加速
2. 将一个数据表物理上分为多个文件，方便处理

* 分区表缺点

1. 第一次需要访问所有分区
2. 公用 MDL 锁
3. 分区后，所有的分区依然位于同一节点
