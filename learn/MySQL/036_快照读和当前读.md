# 快照读和当前读


### 快照读（一致性非锁定读）

* 什么是快照读

指 InnoDB 存储引擎通过行多版本控制的方式来**读取**当前执行时间数据库中**行的数据**；

如果读取的行正在执行 DELETE 或 UPDATE 操作（即加了 X 锁），这时读取操作不会等待行上锁释放；

InnoDB 存储引擎会去读取行的一个快照数据


* 解释

不锁定数据的情况下，读取的是数据记录的可见版本

不需要加锁（两个事务，一个事务在更新时需要加**X 锁**，另一个事务在读取时不阻塞，读取的是可见版本），属于乐观锁的一种


### 当前读（一致性锁定读）

* 什么是当前读

读取数据的当前版本，并加锁；若当前版本已经被加锁且不兼容，则阻塞等待

以下为当前读

```mysql
# 加 X 锁
SELECT ... FOR UPDATE;

UPDATE ...;

DELETE ...;

# 加 S 锁
SELECT ... LOCK IN SHARE MODE;
```
