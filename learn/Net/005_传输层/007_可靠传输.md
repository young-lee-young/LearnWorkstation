# 可靠传输


### 总结

* 发送方的发送窗口是根据接收方的接收窗口设置的，但在同一时刻，发送方的发送窗口并不总是和接收方的接收窗口一样大

1. 网络传送窗口值需要经历一定的时间滞后，并且时间不确定
2. 发送方还可能根据网络当时的拥塞情况适当减小自己的发送窗口尺寸

* 对不按序到达的数据应如何处理，TCP 并无明确规定

1. 如果接收方把不按序到达的数据一律丢弃，那么接收窗口的管理将会比较简单，但这样做，对网络资源利用不利，因为发送方会重复传送较多的数据
2. TCP 通常对不按序到达的数据，是先临时存放在接收窗口中，等到字节流中所缺少的字节收到后，再按序交付上层应用程序

* TCP 要求接收方必须由累积确认和捎带确认机制，这样可以减小开销。接收方可以在合适的时候发送确认，也可以在自己有数据要发送时把确认信息顺便捎带上

1. 接收方不应过分推迟发送确认，否则会导致发送方不必要的超时重传，这反而浪费了网络资源。
   TCP标准规定，确认推迟的时间不应超过0.5秒。若收到一连串具有最大长度的报文段，则必须每隔一个报文段就发送一次确认
2. 捎带确认实际上并不经常发生，因为大多数应用程序很少同时在两个方向上发送数据

* TCP 的全双工通信
