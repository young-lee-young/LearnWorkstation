# iptables åŒ¹é…æ¡ä»¶


### åŸºç¡€

* è¯­æ³•

```bash
iptables [-t è¡¨å] æ“ä½œå‘½ä»¤ [é“¾å] [åŒ¹é…æ¡ä»¶] [-j ç›®æ ‡åŠ¨ä½œæˆ–è·³è½¬]
```


### æŒ‰ç½‘ç»œæ¥å£åŒ¹é…

-iï¼šåŒ¹é…æ•°æ®è¿›å…¥çš„ç½‘ç»œæ¥å£

-oï¼šåŒ¹é…æ•°æ®æµå‡ºçš„ç½‘è·¯æ¥å£

* ç¤ºä¾‹

```bash
# ğŸŒ°ï¼šåŒ¹é…ä» eth0 å£æ¥çš„æ•°æ®åŒ…
iptables -t filter -A INPUT -i eth0 -j DROP
```


### æŒ‰ç…§åœ°å€åŒ¹é…

-sï¼šåŒ¹é…æ•°æ®æ¥æºåœ°å€

-dï¼šåŒ¹é…æ•°æ®ç›®çš„åœ°å€

* ç¤ºä¾‹

```bash
# ğŸŒ°ï¼šåŒ¹é… IP åœ°å€
iptables -t filter -A INPUT -s 192.168.0.1 -j DROP

# ğŸŒ°ï¼šåŒ¹é…ç½‘æ®µ
iptables -t filter -A INPUT -s 192.168.1.0/24 -j DROP

# ğŸŒ°ï¼šåŒ¹é…åŸŸå
iptables -t filter -A INPUT -d www.baidu.com -j DROP
```

* æ³¨æ„âš ï¸

åœ°å€å¯ä»¥æ˜¯ IP åœ°å€ã€ç½‘æ®µã€åŸŸå


### æŒ‰ç…§åè®®åŒ¹é…

-pï¼šåŒ¹é…åè®®ç±»å‹

* ç¤ºä¾‹

```bash
# ğŸŒ°ï¼šåŒ¹é… tcp
iptables -t filter -A INPUT -p tcp -j DROP

# ğŸŒ°ï¼šåŒ¹é… udp
iptables -t filter -A INPUT -p udp -j DROP

# ğŸŒ°ï¼šåŒ¹é… ICMPï¼Œtype 8ï¼ˆpingï¼‰ï¼Œtype 0ï¼ˆpongï¼‰
iptables -t filter -A INPUT -p icmp --icmp-type 8
```


### æŒ‰æºã€ç›®çš„ç«¯å£åŒ¹é…

--sportï¼šåŒ¹é…æºç«¯å£

--dportï¼šåŒ¹é…ç›®çš„ç«¯å£

* ç¤ºä¾‹

```bash
# ğŸŒ°ï¼šåŒ¹é…æºç«¯å£ 1000 çš„ç«¯å£
iptables -t filter -A INPUT -p tcp --sport 1000 -j DROP

# ğŸŒ°ï¼šåŒ¹é…æºç«¯å£ 1000-3000 ç«¯å£
iptables -t filter -A INPUT -p tcp --sport 1000:3000 -j DROP

# ğŸŒ°ï¼šåŒ¹é…ç›®çš„ç«¯å£ >= 1000ï¼ˆå« 1000ï¼‰ç«¯å£
iptables -t filter -A INPUT -p tcp --dport 1000: -j DROP

# ğŸŒ°ï¼šåŒ¹é…ç›®çš„ç«¯å£ <= 3000ï¼ˆå« 3000ï¼‰ç«¯å£
iptables -t filter -A INPUT -p tcp --dport :3000 -j DROP
```

* æ³¨æ„âš ï¸

--sport å’Œ --dport å¿…é¡»é…åˆ -p å‚æ•°ä½¿ç”¨
