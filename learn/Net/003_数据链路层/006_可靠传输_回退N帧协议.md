# 可靠传输 - 回退N帧协议


### 回退N帧协议（GBN，Go Back N）

* 发送方

发送窗口的尺寸 Wt 取值： 1 < Wt <= 2^n - 1，其中 n 是构成分组序号的比特数量。如果 Wt > 2^n，接收方无法分辨新、旧数据分组

发送方可在未收到接收方确认分组的情况下，将序号落在发送窗口内的多个数据分组全部发送出去

发送方只有收到对已发送数据分组的确认时，发送窗口才能向前相应滑动

发送方收到多个重复确认时，可在重传计时器超时前尽早开始重传，由具体实现决定


* 接收方

接收窗口的尺寸 Wr 取值：Wr = 1，接收方只能按序接收数据分组


* 回退N帧

某些序号的数据分组已经正确到达接收方，但是由于**接收窗口**内的数据分组由于误码不被接受，其他序号的分组受到牵连而不被接受，
发送方还要重传这些数据，因此称为 回退N帧


* 自动重传请求（ARQ，Automatic Repeat-reQuest）

ARQ：重传的请求是发送方自动进行的，接收方不需要请求发送方重传某个出错数据帧

回退N帧协议 在流水线传输的基础上利用发送窗口来限制发送方连续发送数据分组的数量，是一种连续 ARQ协议


* 累积确认

接收方不一定要对收到的数据分组逐个发送确认，而是可以在收到几个数据分组后，对按序到达的最后一个数据分组发送确认。
ACKn 表示序号为 n 及以前的所有数据分组都已正确接收


* ⚠️注意

由于回退N帧协议的特性，当通信线路质量不好时，其信道利用率并不比 停止-等待协议 高
