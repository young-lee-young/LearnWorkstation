# ARP 协议


### MAC 地址（Media Access Control）

* 基础

MAC地址 一般被固化在网卡的电可擦可编程只读存储器 EEPROM 中，因此 MAC地址 被称为硬件地址

* MAC 地址格式

共 6 字节

前 3 字节：组织唯一标识符（OUI）
后 3 字节：网络接口标识符，由 OUI 厂商自行随意分配


### ARP协议

* ARP 作用

已知设备所分配的 IP 地址，使用 ARP 协议可以通过 IP 地址获取设备的 MAC 地址

* 工作过程

1. 源主机在自己的**ARP高速缓存**中查询是否有记录
2. ARP高速缓存中不存在，发送**ARP请求报文**（广播），封装在 MAC帧 中，目的地址为 FF:FF:FF:FF:FF:FF
3. 其他主机收到广播报文后，ARP进程解析 ARP报文，发现IP不是自己的IP，忽略
4. 目的主机发现是自己的 IP地址，首先将源主机的IP地址和MAC地址记录到自己的ARP高速缓存表中，然后给源主机发送**ARP响应报文**（单播），封装在 MAC帧 中，目的地址为源主机MAC地址
5. 其他主机收到单播报文后，发现目的MAC地址不是自己的，丢弃
6. 源主机收到单播报文后，交付上层，ARP进程解析相应报文，将目的主机的IP地址和MAC地址记录到ARP高速缓存中
