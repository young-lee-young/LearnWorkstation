# 线程


### 线程基础

* 线程

线程是进程的子任务，CPU调度和分配的基本单位，实现进程内并发


* 线程切换

线程切换：寄存器 + 栈（不用切换页表，所以线程切换要比进程切换轻量）


* 进程和线程关系

一个进程包含多个线程，线程依赖进程存在，共享进程内存


### 线程控制块 TCB（Thread Control Block）



### 线程创建

* clone 过程（pthread_create）

执行 clone 时，mm、fs、files、signal 所有的指针均不变


### ??注意

* PID 和 TGID

每个线程的 PID 在内核中都是不同的，但是在用户态中 getpid 的均为同一个 ID（TGID，thread group id）


* top 命令

```bash
# 进程内的线程当成一个组来统计
top

# 单个线程统计
top -H
```
