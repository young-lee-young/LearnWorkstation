### 分布式锁

1. 使用 redis 做分布式，使用 SETNX，设置成功返回 1，失败返回 0

```bash
SETNX $key $value
```

2. 问题：加锁的客户端加锁后挂掉，锁不能释放

设置过期时间

3. 问题：设置过期时间，业务还没有执行完成，锁过期了

对锁进行续约，每隔几秒重新设置过期时间，判断 key 是否存在，存在进行续约

4. 问题：如果 key 是被其他客户端写入的

为每个客户端设置一个ID，锁的 value 可以是客户端ID，在续锁的时候，可以判断当前分布式锁的 value 是否是当前客户端的，如果是续锁，否则不处理
