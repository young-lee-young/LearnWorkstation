# 大二层网络

### 从虚拟机迁移说起

服务器不能随便在不同二层域之间移动，因为一旦服务器迁移到其他二层域，就需要变更IP地址，服务器上的业务会中断。所以迁移需要在同一二层域中



### 传统二层网络

1. 传统二层网络最主要的技术是VLAN和xSTP（STP、RSTP、MSTP）



### 大二层网络

* 问题

  1. 通过划分VLAN来缩小二层域的范围和规模，大二层网络要求所有服务器纳入同一个二层域
  2. xSTP收敛慢，冗余链路和设备被阻塞，带宽利用率低

  
### 大二层网络解决办法

* 釜底抽薪
  1. 网络设备虚拟化 + 链路聚合
* 移花接木



 * 瞒天过海
   1. 



### VLAN

标识符12bit，可以标识4096个二层网络（实际上是0和4095保留）



### VxLAN（Virtual Extensible LAN）

标识符24bit，可以标识1600多万个二层网络

* VTEP（隧道端点，Tunnel Endpoint）

  1. 是VxLAN协议中对原始数据包进行封装和解封装的设备
  2. 可以由硬件设备实现，也可以由软件实现
  3. 每个VTEP具备两个接口：一个本地桥接接口，负责原始以太网帧接收和发送，另一个是IP接口，负责VxLAN数据帧接收和发送
  4. 



overlay

隧道技术

